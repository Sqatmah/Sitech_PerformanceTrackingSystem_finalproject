<div class="form-field {% if field.errors %}has-error{% endif %}">
    <label for="{{ field.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">
        {{ field.label }}
        {% if field.field.required %}
            <span class="text-red-500 ml-1">*</span>
        {% endif %}
    </label>
    
    <div class="input-group">
        {% if icon %}
            <div class="input-icon">
                <i class="fas fa-{{ icon }}"></i>
            </div>
        {% endif %}
        
        {% if field.field.widget.input_type == 'textarea' %}
            <textarea name="{{ field.name }}" id="{{ field.id_for_label }}" 
                      class="form-textarea {% if field.errors %}is-invalid shake{% elif field.value %}is-valid{% endif %}"
                      {% if field.field.required %}required{% endif %}
                      placeholder="{{ field.field.widget.attrs.placeholder|default:field.label }}">{{ field.value|default:'' }}</textarea>
        {% elif field.field.widget.input_type == 'select' %}
            <select name="{{ field.name }}" id="{{ field.id_for_label }}" 
                    class="form-select {% if field.errors %}is-invalid shake{% elif field.value %}is-valid{% endif %}"
                    {% if field.field.required %}required{% endif %}>
                {% for choice in field.field.choices %}
                    <option value="{{ choice.0 }}" {% if choice.0 == field.value %}selected{% endif %}>{{ choice.1 }}</option>
                {% endfor %}
            </select>
        {% else %}
            <input type="{{ field.field.widget.input_type|default:'text' }}" 
                   name="{{ field.name }}" 
                   id="{{ field.id_for_label }}" 
                   value="{{ field.value|default:'' }}"
                   class="form-input {% if icon %}input-with-icon{% endif %} {% if field.errors %}is-invalid shake{% elif field.value %}is-valid{% endif %}"
                   {% if field.field.required %}required{% endif %}
                   placeholder="{{ field.field.widget.attrs.placeholder|default:field.label }}">
        {% endif %}
    </div>
    
    {% if field.errors %}
        <div class="field-error">
            <i class="fas fa-exclamation-circle mr-1"></i>
            {{ field.errors.0 }}
        </div>
    {% endif %}
    
    {% if field.help_text %}
        <div class="field-help">
            <i class="fas fa-info-circle mr-1"></i>
            {{ field.help_text }}
        </div>
    {% endif %}
</div>